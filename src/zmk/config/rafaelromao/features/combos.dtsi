/*
*
* Copyright (c) 2022 Rafael Romão
* SPDX-License-Identifier: MIT
*
*/

/*                KEY POSITIONS

  ╭─────────────────────╮ ╭─────────────────────╮
  │ LTP LTA LTM LTI LTC │ │ RTC RTI RTM RTA RTP │
  │ LHP LHA LHM LHI LHC │ │ RHC RHI RHM RHA RHP │
  │ LBP LBA LBM LBI LBC │ │ RBC RBI RBM RBA RBP │
  ╰───────╮ LT1 LT0 LTH │ │ RTH RT0 RT1 ╭───────╯
          ╰─────────────╯ ╰─────────────╯ */

/ {
    #define COMBO_TERM 50

    #define COMBO(NAME, KEYS, BINDINGS, LAYERS) \
        NAME { \
            timeout-ms = <COMBO_TERM>; \
            layers = <LAYERS>; \
            key-positions = <KEYS>; \
            bindings = <BINDINGS>; \
        };

    combos {
        compatible = "zmk,combos";

        COMBO(cb_save,          LHA LHM LTH, &mc_save,       ROMAK NUMPAD)
        COMBO(cb_esc,           LTA LTM LTH, &kp ESC,        ROMAK NUMPAD)
        COMBO(cb_esc_save,      LTA LTM,     &mc_save_esc,   NAV)
        COMBO(cb_pars,          LTA LTM,     &th_pars 0 0,   LOWER)
        COMBO(cb_unds,          LBA LBM,     &kp UNDERSCORE, ROMAK)
        COMBO(cb_z,             LBM LBI,     &kp Z,          ROMAK)
        COMBO(cb_paste_l,       LHM LHI LTH, &mc_paste,      ROMAK NUMPAD)
        COMBO(cb_copy_l,        LBM LBI LTH, &mc_copy,       ROMAK NUMPAD)
        COMBO(cb_fullscr,       LHP LHA LTH, &mc_fullscr,    ROMAK NUMPAD)
        // COMBO(cb_find,           LBP LBA LTH, &mc_find,        ROMAK NUMPAD)
        // COMBO(cb_raise,         LTA LTH,     &sl RAISE,      ROMAK)
        // COMBO(cb_lower,         LTM RTH,     &sl LOWER,      ROMAK)

        COMBO(cb_enter,         RHM RHA RTH, &kp ENTER,          ROMAK NUMPAD LOWER)
        COMBO(cb_tab,           RTM RTA RTH, &kp TAB,            ROMAK NUMPAD)
        COMBO(cb_braces,        RTA RTM,     &mc_braces,         RAISE)
        COMBO(cb_semi,          RBM RBA,     &th_semi 0 0,       ROMAK)
        COMBO(cb_p,             RHI RHM,     &kp P,              ROMAK)
        COMBO(cb_x,             RBI RBM,     &kp X,              ROMAK)
        COMBO(cb_paste_r,       RHI RHM RTH, &mc_paste,          ROMAK NUMPAD)
        COMBO(cb_copy_r,        RBI RBM RTH, &mc_copy,           ROMAK NUMPAD)
        COMBO(cb_selall,        RHA RHP RTH, &mc_selall,         ROMAK NUMPAD)
        COMBO(cb_o_esc,         RTM RTA,     &mc_o_esc,          ROMAK)
        COMBO(cb_end_semi_ent,  RBI RBM RBA, &mc_end_semi_ent,   ROMAK)
        // COMBO(cb_undo,          RBA RBP RTH, &mc_undo,       ROMAK NUMPAD)
        // COMBO(cb_lower,         RTA RTH,     &sl LOWER,      ROMAK)
        // COMBO(cb_raise,         RTM RTH,     &sl RAISE,      ROMAK)
        
        COMBO(cb_refresh,  RHM RHA,     &mc_refresh,    MACROS)
    };
};