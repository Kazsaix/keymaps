/*
*
* Copyright (c) 2022 Rafael Romão
* SPDX-License-Identifier: MIT
*
*/

/*                KEY POSITIONS

  ╭─────────────────────╮ ╭─────────────────────╮
  │ LTP LTR LTM LTI LTC │ │ RTC RTI RTM RTR RTP │
  │ LHP LHR LHM LHI LHC │ │ RHC RHI RHM RHR RHP │
  │ LBP LBR LBM LBI LBC │ │ RBC RBI RBM RBR RBP │
  ╰───────╮ L2  L1  L0  │ │ R0  R1  R2  ╭───────╯
          ╰─────────────╯ ╰─────────────╯ */

/ {
    #define COMBO_TERM 50

    #define COMBO(NAME, KEYS, BINDINGS, LAYERS) \
        NAME { \
            timeout-ms = <COMBO_TERM>; \
            layers = <LAYERS>; \
            key-positions = <KEYS>; \
            bindings = <BINDINGS>; \
        };

    combos {
        compatible = "zmk,combos";

        COMBO(cb_save,          LHR LHM L0,  &mc_save,           ROMAK CASE NUMPAD)
        COMBO(cb_esc,           LTR LTM L0,  &kp ESC,            ROMAK CASE NUMPAD)
        COMBO(cb_fullscr,       LHM LHI L0,  &mc_fullscr,        ROMAK CASE NUMPAD)
        COMBO(cb_find,          LBM LBI L0,  &mc_find,           ROMAK CASE NUMPAD)
        COMBO(cb_undo,          LBR LBM L0,  &mc_undo,           ROMAK CASE NUMPAD)

        COMBO(cb_unds,          LBR LBM,     &mm_unds,           ROMAK CASE)
        COMBO(cb_raise_l,       LHR L0,      &sl RAISE,          ROMAK CASE)
        COMBO(cb_lower_l,       LHM L0,      &sl LOWER,          ROMAK CASE)
        
        COMBO(cb_pars,          LTR LTM,     &th_pars 0 0,       LOWER)

        COMBO(cb_esc_save,      LTR LTM,     &mc_save_esc,       NAV)

        COMBO(cb_enter,         RHM RHR R0,  &kp ENTER,          ROMAK CASE NUMPAD LOWER)

        COMBO(cb_tab,           RTM RTR R0,  &kp TAB,            ROMAK CASE NUMPAD)
        COMBO(cb_paste,         RBI RBM R0,  &mc_paste,          ROMAK CASE NUMPAD)
        COMBO(cb_copy,          RHI RHM R0,  &mc_copy,           ROMAK CASE NUMPAD)
        COMBO(cb_selall,        RBM RBR R0,  &mc_selall,         ROMAK CASE NUMPAD)

        COMBO(cb_o_esc,         RTM RTR,     &mc_o_esc,          ROMAK CASE)
        COMBO(cb_semi,          RBM RBR,     &th_semi 0 0,       ROMAK CASE)
        COMBO(cb_p,             RBI RBM,     &kp P,              ROMAK CASE)
        COMBO(cb_y,             RHI RHM,     &kp Y,              ROMAK CASE)
        COMBO(cb_x,             RHM RHR,     &kp X,              ROMAK CASE)
        COMBO(cb_lower_r,       RHR R0,      &sl LOWER,          ROMAK CASE)
        COMBO(cb_raise_r,       RHM R0,      &sl RAISE,          ROMAK CASE)

        COMBO(cb_ao,            RHM RHR,     &mc_ao,             ACCENT)
        COMBO(cb_cu,            RTI RTM,     &mc_cu,             ACCENT)
        COMBO(cb_ca,            RHI RHM,     &mc_co,             ACCENT)
        COMBO(cb_co,            RBI RBM,     &mc_ca,             ACCENT)
        COMBO(cb_cao,           RHI RHM RHR, &mc_cao,            ACCENT)
        COMBO(cb_oes,           RBM RBR,     &mc_oes,            ACCENT)
        COMBO(cb_coes,          RBI RBM RBR, &mc_coes,           ACCENT)

        COMBO(cb_braces,        RTR RTM,     &mc_braces,         RAISE)
        COMBO(cb_plus,          RHR RHM,     &kp PLUS,           RAISE)
        COMBO(cb_star,          RBR RBM,     &kp STAR,           RAISE)

        COMBO(cb_end_ent,       RTM RTR,     &th_end_ent 0 0,    MEDIA)
        
        COMBO(cb_refresh_z0,    RHM RHR,     &mm_refresh_z0,     MACROS)
        COMBO(cb_close_tab_win, RBM RBR,     &mm_close_tab_win,  MACROS)
    };
};